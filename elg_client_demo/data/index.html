<!DOCTYPE html>
<head>
	<link rel="stylesheet" href="resources/picnic.min.css"></link>
	<link rel="stylesheet" href="resources/plugins.min.css"></link>
	<link rel="stylesheet" href="resources/animate.min.css"></link>
	<script src="resources/umbrella.min.js"></script>
	<!-- for ssid tables -->
	<style>
		.hidden {
		    display: none;
		}
	</style>
	<!-- toggle switch -->
	<style>
		.switch {
		  position: relative;
		  display: inline-block;
		  width: 34px;
		  height: 60px;
		}

		.switch input {display:none;}

		.slider {
		  position: absolute;
		  cursor: pointer;
		  top: 0;
		  left: 0;
		  right: 0;
		  bottom: 0;
		  background-color: #ccc;
		  -webkit-transition: .4s;
		  transition: .4s;
		}

		.slider:before {
		  position: absolute;
		  content: "";
		  height: 26px;
		  width: 26px;
		  left: 4px;
		  bottom: 4px;
		  background-color: white;
		  -webkit-transition: .4s;
		  transition: .4s;
		}

		input:checked + .slider {
		  background-color: #0e4d95;
		}

		input:focus + .slider {
		  box-shadow: 0 0 1px #0e4d95;
		}

		input:checked + .slider:before {
		  -webkit-transform: translateY(-26px);
		  -ms-transform: translateY(-26px);
		  transform: translateY(-26px);
		}
		</style>
	<!-- loading animation -->
  <style type="text/css">
	    /*
	 *  Usage:
	 *
	      <div class="sk-wave">
	        <div class="sk-rect sk-rect1"></div>
	        <div class="sk-rect sk-rect2"></div>
	        <div class="sk-rect sk-rect3"></div>
	        <div class="sk-rect sk-rect4"></div>
	        <div class="sk-rect sk-rect5"></div>
	      </div>
	 *
	 */
	.sk-wave {
	  margin: 40px auto;
	  width: 50px;
	  height: 40px;
	  text-align: center;
	  font-size: 10px; }
	  .sk-wave .sk-rect {
	    background-color: #0e4d95;
	    height: 100%;
	    width: 6px;
	    display: inline-block;
	    -webkit-animation: sk-waveStretchDelay 1.2s infinite ease-in-out;
	            animation: sk-waveStretchDelay 1.2s infinite ease-in-out; }
	  .sk-wave .sk-rect1 {
	    -webkit-animation-delay: -1.2s;
	            animation-delay: -1.2s; }
	  .sk-wave .sk-rect2 {
	    -webkit-animation-delay: -1.1s;
	            animation-delay: -1.1s; }
	  .sk-wave .sk-rect3 {
	    -webkit-animation-delay: -1s;
	            animation-delay: -1s; }
	  .sk-wave .sk-rect4 {
	    -webkit-animation-delay: -0.9s;
	            animation-delay: -0.9s; }
	  .sk-wave .sk-rect5 {
	    -webkit-animation-delay: -0.8s;
	            animation-delay: -0.8s; }
	@-webkit-keyframes sk-waveStretchDelay {
	  0%, 40%, 100% {
	    -webkit-transform: scaleY(0.4);
	            transform: scaleY(0.4); }
	  20% {
	    -webkit-transform: scaleY(1);
	            transform: scaleY(1); } }
	@keyframes sk-waveStretchDelay {
	  0%, 40%, 100% {
	    -webkit-transform: scaleY(0.4);
	            transform: scaleY(0.4); }
	  20% {
	    -webkit-transform: scaleY(1);
	            transform: scaleY(1); } }
	</style>
</head>

<nav class="loading" style="background-color: #0e4d95;"><a href="/" class="brand" style="background:url('resources/skyhook_logo.svg') center no-repeat; color:transparent;height: 50px;width:160px; margin-left:20px"><span>Logo</span></a></nav>

<main>
	<div class="tabs three" style="text-align:center; width:90%; max-width:960px; padding-top: 80px; margin:auto;">
  <input id='tab-1' type='radio' name='tabgroupB' checked />
  <label class="pseudo button toggle" for="tab-1">Current Network</label>
  <input id='tab-2' type='radio' name='tabgroupB'>
  <label class="pseudo button toggle" for="tab-2">Network Scan</label>
  <input id='tab-3' type='radio' name='tabgroupB'>
  <label class="pseudo button toggle" for="tab-3">Systems Panel</label>
  <div class="row">
    <div>
      
    </div>

    <div>
    	<button class="special" style>Scan for Networks</button>
	      <div class="sk-wave hidden">
	        <div class="sk-rect sk-rect1"></div>
	        <div class="sk-rect sk-rect2"></div>
	        <div class="sk-rect sk-rect3"></div>
	        <div class="sk-rect sk-rect4"></div>
	        <div class="sk-rect sk-rect5"></div>
	      </div>
      <section class="aps flex one center" style="text-align:left; width:90%; max-width:960px; margin:auto;">
			</section>
    </div>

    <div>
			<label class="switch">
			  <input class="toggle" data-wut="hehe" type="checkbox">
			  <div class="slider"></div>
			</label>
    </div>
  </div>
</div>
</main>

<script>
	var thing = function(ssid, bssid, rssi, encryption_type, channel, hidden){
		return "<article class='stack animated fadeInDown show card'><header><div class='flex two'><div>"+ssid+"</div><div>"+rssi+"</div></div></header><article class='hidden card'><footer><div class='testing flex two'><div>E:"+encryption_type+"<br>B:"+bssid+"<br>C:"+channel+"<br>H:"+hidden+"<br></div><div>chart</div></div></footer></article></article>"
	};
	var scan = function(){
		console.log('scanning')
	  	var action = 'skyhookclient/scan';
		var after = function(err, data){
			Object.keys(data).forEach(function(key) {
		    	var network_item = data[key];
		    	// console.log(thing(key,network_item["bssid"], network_item["rssi"], network_item["encrypt"], network_item["channel"], network_item["hidden"]));
		    	u('.aps').append(thing(key,network_item["bssid"], network_item["rssi"], network_item["encrypt"], network_item["channel"], network_item["hidden"]));
			});
			u('.sk-wave').addClass('hidden');
			reset();
		}
		var before = function(xhr){
			xhr.responseType = 'json';
			u('.sk-wave').removeClass('hidden')
		};
		ajax(action, {method:'GET'}, after, before);
	};
	var reset = function(){
		u('.show').off('click');
		u('.show').on('click', function(e) {
  			u(this).find('article').toggleClass('hidden')
  		});
	};
 	u('.special').on('click', function(e){
 		console.log('button click');
 		console.log("attempting to remove class")
 		u('.aps').children().remove();
 		scan();
	});
	if(u('.aps > article').length == 0){
		console.log("initial scan")
		scan();
	}
	u('.toggle').on('click', function() {

    // if (u('.toggle').is(':checked')) {
    //     console.log('checked');
    // }
    // else {
    //     // code
    // }
    u('.toggle:checked').each(function(){console.log('hi')})
})
</script>
</html>